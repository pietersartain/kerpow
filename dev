export CLASSPATH="/opt/Cloudscape10.0/lib/derby.jar:/opt/Cloudscape10.0/lib/derbytools.jar:ui/:lists/:${CLASSPATH}"

if [ "$2" = "--verbose" ]; then
echo "Exporting classpath ..."
echo "Classpath: " $CLASSPATH
fi

if [ "$2" = "--clean" ]; then
rm ./*.class
fi

if [ ! "$2" = "--no-compile" ]; then
echo ""
echo "Compiling .java files ..."
echo ""
javac *.java
fi

if [ "$2" = "--make-package" ]; then
cd build

echo "Cleaning build area ..."
	rm kerpow.tar.bz2
	rm kerpow.tar
	rm ./*.class
	rm kerpow.jar
	rm ./kerpow/* -dr

echo "Building .jar ..."
	cp ../*.class ./
	jar cmf ./res/manifest.txt kerpow.jar *.class
	cp ./res/* ./kerpow/
	cp kerpow.jar ./kerpow/
	cp ../kerpow.prefs ./kerpow/

echo "Building .tar.bz2 ..."
	tar -cf kerpow.tar kerpow
	bzip2 -9 kerpow.tar

else

	if [ ! "$1" = "" ]; then
	echo "##############"
	echo "#  Running!  #"
	echo "##############"
	echo ""
	java $1
	echo ""
	echo "######################"
	echo "#  Program finished  #"
	echo "######################"
	else
	echo "######################################"
	echo "#  Please specify class file to run! #"
	echo "######################################"
	fi
fi
